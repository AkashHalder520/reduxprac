{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axiosInstance from \"../Helper/Helper\";\nconst initialState = {\n  upload_status: \"idle\",\n  // upload_message: \"idle\",\n  status: \"idle\",\n  login_status: \"idle\",\n  des: [],\n  isloggedIn: false,\n  redirectTo: null,\n  redirectToo: null,\n  Logout: false\n};\nexport const register = createAsyncThunk(\"register\", async formData => {\n  let res = await axiosInstance.post(`user/signup`, formData);\n  let resData = res === null || res === void 0 ? void 0 : res.data;\n  return resData;\n});\nexport const login = createAsyncThunk(\"login\", async formData => {\n  let res = await axiosInstance.post(`user/signin`, formData);\n  let resData = res === null || res === void 0 ? void 0 : res.data;\n  return resData;\n});\nexport const Authslice = createSlice({\n  name: \"registration\",\n  initialState,\n  reducers: {\n    reset_redirectTo: (state, _ref) => {\n      let {\n        payload\n      } = _ref;\n      state.redirectTo = payload;\n    },\n    reset_redirectToo: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      state.redirectToo = payload;\n    },\n    handleLogout: (state, _ref3) => {\n      let {\n        payload\n      } = _ref3;\n      localStorage.removeItem(\"token\");\n      state.Logout = false;\n    },\n    handleCraete: (state, _ref4) => {\n      let {\n        payload\n      } = _ref4;\n      localStorage.removeItem(\"token\");\n      state.Logout = false;\n    },\n    checkToken: (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      localStorage.getItem(\"token\");\n      state.Logout = true;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(register.pending, (state, action) => {\n      state.status = \"loading\";\n    }).addCase(register.fulfilled, (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.status = \"idle\";\n      if ((payload === null || payload === void 0 ? void 0 : payload.status) === 200) {\n        // state.isloggedIn=true \n\n        localStorage.setItem(\"first_name\", payload === null || payload === void 0 ? void 0 : payload.data.first_name);\n        state.redirectToo = '/';\n      }\n    }).addCase(register.rejected, (state, action) => {\n      state.status = \"idle\";\n    }).addCase(login.pending, (state, action) => {\n      state.login_status = \"loading\";\n    }).addCase(login.fulfilled, (state, _ref7) => {\n      let {\n        payload\n      } = _ref7;\n      if ((payload === null || payload === void 0 ? void 0 : payload.status) === 200) {\n        localStorage.setItem(\"token\", payload === null || payload === void 0 ? void 0 : payload.token);\n        state.redirectTo = '/Display';\n        state.Logout = true;\n      }\n    }).addCase(login.rejected, (state, action) => {});\n  }\n});\nexport const {\n  checkToken,\n  handleLogout,\n  reset_redirectTo,\n  reset_redirectToo\n} = Authslice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axiosInstance","initialState","upload_status","status","login_status","des","isloggedIn","redirectTo","redirectToo","Logout","register","formData","res","post","resData","data","login","Authslice","name","reducers","reset_redirectTo","state","_ref","payload","reset_redirectToo","_ref2","handleLogout","_ref3","localStorage","removeItem","handleCraete","_ref4","checkToken","_ref5","getItem","extraReducers","builder","addCase","pending","action","fulfilled","_ref6","setItem","first_name","rejected","_ref7","token","actions"],"sources":["/home/webskitters/Desktop/project/reduxprac/src/Redux/Authslice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axiosInstance from \"../Helper/Helper\";\r\n\r\n\r\n\r\nconst initialState = {\r\n  upload_status: \"idle\",\r\n  // upload_message: \"idle\",\r\n  status: \"idle\",\r\n  login_status: \"idle\",\r\n  des: [],\r\n  isloggedIn: false,\r\n  redirectTo: null,\r\n  redirectToo:null,\r\n  Logout:false\r\n};\r\n\r\n\r\nexport const register = createAsyncThunk(\r\n  \"register\",\r\n\r\n  async (formData) => {\r\n    let res = await axiosInstance.post(`user/signup`, formData);\r\n\r\n    let resData = res?.data;\r\n\r\n    return resData;\r\n  }\r\n);\r\n\r\nexport const login = createAsyncThunk(\r\n  \"login\",\r\n\r\n  async (formData) => {\r\n    let res = await axiosInstance.post(`user/signin`, formData);\r\n\r\n    let resData = res?.data;\r\n\r\n    return resData;\r\n  }\r\n);\r\n\r\nexport const Authslice = createSlice({\r\n  name: \"registration\",\r\n  initialState,\r\n reducers:{\r\n  reset_redirectTo: (state, { payload }) => {\r\n    state.redirectTo = payload;\r\n  \r\n  },\r\n  reset_redirectToo: (state, { payload }) => {\r\n    state.redirectToo = payload;\r\n  \r\n  },\r\n\r\n  handleLogout: (state, { payload }) => {\r\n  localStorage.removeItem(\"token\");\r\n  state.Logout=false\r\n  \r\n  },\r\n\r\n  handleCraete: (state, { payload }) => {\r\n    localStorage.removeItem(\"token\");\r\n    state.Logout=false\r\n    \r\n    },\r\n  checkToken: (state, { payload }) => {\r\n    localStorage.getItem(\"token\");\r\n    state.Logout=true\r\n    \r\n    },\r\n },\r\n\r\n \r\n\r\n  extraReducers: (builder) => {\r\n    builder\r\n\r\n\r\n      .addCase(register.pending, (state, action) => {\r\n        state.status = \"loading\";\r\n      })\r\n      .addCase(register.fulfilled, (state, { payload }) => {\r\n        state.status = \"idle\";\r\n        if (payload?.status === 200) {\r\n          // state.isloggedIn=true \r\n\r\n          localStorage.setItem(\"first_name\", payload?.data.first_name);\r\n          state.redirectToo='/'\r\n\r\n        }\r\n      })\r\n      .addCase(register.rejected, (state, action) => {\r\n        state.status = \"idle\";\r\n      })\r\n\r\n      .addCase(login.pending, (state, action) => {\r\n        state.login_status = \"loading\";\r\n      })\r\n      .addCase(login.fulfilled, (state, { payload }) => {\r\n        if (payload?.status === 200) {\r\n          localStorage.setItem(\"token\", payload?.token);\r\n          state.redirectTo='/Display'\r\n          state.Logout=true\r\n        }\r\n\r\n\r\n\r\n      })\r\n      .addCase(login.rejected, (state, action) => {\r\n\r\n\r\n      })\r\n  },\r\n});\r\n\r\nexport const {checkToken, handleLogout, reset_redirectTo,reset_redirectToo} = Authslice.actions;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}